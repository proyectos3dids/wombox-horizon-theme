{{ 'footer-wombox.css' | asset_url | stylesheet_tag }} 
<!-- sections/footer-wombox.liquid -->

  {% if section.settings.strip_image != blank %}
    {% assign strip_src = section.settings.strip_image | image_url %}
    <div class="wbf__bottom" style="--pay-size: {{ section.settings.payments_size }}px;">

      <!-- Métodos de pago: personalizados (CDN) o automáticos -->
      <div class="wbf__payments" aria-label="Métodos de pago">
        {% if section.settings.use_custom_payment_icons %}
          {% for block in section.blocks %}
            {% if block.type == 'payment_icon' and block.settings.icon_url != blank %}
              <span class="wbf__pay-pill" {{ block.shopify_attributes }}>
                <img src="{{ block.settings.icon_url }}" alt="{{ block.settings.icon_alt | escape }}" loading="lazy">
              </span>
            {% endif %}
          {% endfor %}
        {% elsif section.settings.show_payments %}
          {% for type in shop.enabled_payment_types %}
            <span class="wbf__pay-pill">{{ type | payment_type_svg_tag }}</span>
          {% endfor %}
        {% endif %}
      </div>

      <!-- Slider WOMBOX -->
      <div class="wbf__marquee"
           style="--marquee-h: {{ section.settings.strip_height }}px; --marquee-speed: {{ section.settings.strip_speed }}s; --marquee-gap: {{ section.settings.strip_gap }}px;">
        <div class="wbf__track">
          {% for i in (1..8) %}<img src="{{ strip_src }}" alt="WOMBOX" class="wbf__item-img">{% endfor %}
          {% for i in (1..8) %}<img src="{{ strip_src }}" alt="WOMBOX" class="wbf__item-img">{% endfor %}
        </div>
      </div>

      <p class="wbf__copy">© {{ 'now' | date: "%Y" }} WOMBOX</p>
    </div>
  {% endif %}
</footer>

{% schema %}
{
  "name": "Footer WOMBOX (Desktop)",
  "tag": "section",
  "class": "section-footer-wombox",
  "settings": [
    { "type": "text", "id": "cta_text", "label": "Texto del botón CTA", "default": "DESCUBRE NUESTRAS CAJAS" },
    { "type": "url", "id": "cta_link", "label": "Enlace del botón CTA" },

    { "type": "image_picker", "id": "strip_image", "label": "Imagen de franja (slider)" },
    { "type": "range", "id": "strip_height", "label": "Altura de la franja", "min": 60, "max": 220, "step": 2, "default": 120, "unit": "px" },
    { "type": "range", "id": "strip_speed", "label": "Velocidad del slider", "min": 5, "max": 60, "step": 1, "default": 25, "unit": "s" },
    { "type": "range", "id": "strip_gap", "label": "Separación entre imágenes", "min": 0, "max": 300, "step": 5, "default": 140, "unit": "px" },

    { "type": "checkbox", "id": "show_payments", "label": "Mostrar métodos de pago automáticos", "default": false },
    { "type": "checkbox", "id": "use_custom_payment_icons", "label": "Usar iconos de pago desde mi CDN", "default": true },
    { "type": "range", "id": "payments_size", "label": "Tamaño de iconos de pago", "min": 14, "max": 26, "step": 1, "default": 18, "unit": "px" }
  ],
  "blocks": [
    {
      "type": "menu_column",
      "name": "Columna de menú",
      "limit": 3,
      "settings": [
        { "type": "link_list", "id": "menu", "label": "Selecciona un menú" }
      ]
    },
    {
      "type": "payment_icon",
      "name": "Icono de pago (CDN)",
      "limit": 10,
      "settings": [
        { "type": "url", "id": "icon_url", "label": "URL del icono (SVG/PNG desde tu CDN)" },
        { "type": "text", "id": "icon_alt", "label": "Texto alternativo" }
      ]
    }
  ],
  "max_blocks": 13,
  "presets": [
    {
      "name": "Footer WOMBOX (Desktop)",
      "blocks": [
        { "type": "menu_column" },
        { "type": "menu_column" },
        { "type": "menu_column" }
      ]
    }
  ]
}
{% endschema %}