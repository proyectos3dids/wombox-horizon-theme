{{ 'footer-wombox.css' | asset_url | stylesheet_tag }}


<footer class="wombox-footer">
  <div class="wbf__inner">
    <!-- Menús (bloques) -->
    <div class="wbf__menus">
      {% for block in section.blocks %}
        {% if block.type == 'menu_column' %}
          <nav class="wbf__col" {{ block.shopify_attributes }}>
            {% if block.settings.menu != blank %}
              <ul class="wbf__list">
                {% for link in block.settings.menu.links %}
                  <li class="wbf__item"><a class="wbf__link" href="{{ link.url }}">{{ link.title }}</a></li>
                {% endfor %}
              </ul>
            {% endif %}
          </nav>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Columna 4: CTA + redes -->
    <div class="wbf__cta-col">
      <a href="{{ section.settings.cta_link }}" class="wbf__cta">{{ section.settings.cta_text }}</a>
      <div class="wbf__social" aria-label="Redes sociales">
        <a href="#">f</a><a href="#">i</a><a href="#">x</a><a href="#">in</a><a href="#">▶</a><a href="#">t</a>
      </div>
    </div>
  </div>

  {% if section.settings.strip_image != blank %}
    {% assign strip_src = section.settings.strip_image | image_url %}
    <div class="wbf__bottom" style="--pay-size: {{ section.settings.payments_size }}px;">

      <!-- Métodos de pago (imagen subida o automáticos) -->
      <div class="wbf__payments" aria-label="Métodos de pago">
        {% if section.settings.use_custom_payment_icons %}
          {% for block in section.blocks %}
            {% if block.type == 'payment_icon' and block.settings.icon_image != blank %}
              <span class="wbf__pay-pill" {{ block.shopify_attributes }}>
                <img src="{{ block.settings.icon_image | image_url }}" alt="{{ block.settings.icon_alt | escape }}" loading="lazy">
              </span>
            {% endif %}
          {% endfor %}
        {% elsif section.settings.show_payments %}
          {% for type in shop.enabled_payment_types %}
            <span class="wbf__pay-pill">{{ type | payment_type_svg_tag }}</span>
          {% endfor %}
        {% endif %}
      </div>

      <!-- Slider WOMBOX -->
      <div class="wbf__marquee"
           style="--marquee-h: {{ section.settings.strip_height }}px; --marquee-speed: {{ section.settings.strip_speed }}s; --marquee-gap: {{ section.settings.strip_gap }}px;">
        <div class="wbf__track">
          {% for i in (1..8) %}<img src="{{ strip_src }}" alt="WOMBOX" class="wbf__item-img">{% endfor %}
          {% for i in (1..8) %}<img src="{{ strip_src }}" alt="WOMBOX" class="wbf__item-img">{% endfor %}
        </div>
      </div>

      <!-- Copy desktop -->
      <p class="wbf__copy wbf__copy--desktop">© {{ 'now' | date: "%Y" }} WOMBOX</p>

      <!-- Copy móvil (se mostrará solo en mobile, queda debajo de pagos gracias al media query) -->
      <p class="wbf__copy wbf__copy--mobile">© {{ 'now' | date: "%Y" }} WOMBOX</p>
    </div>
  {% endif %}
</footer>

{% schema %}
{
  "name": "Footer WOMBOX (Desktop)",
  "tag": "section",
  "class": "section-footer-wombox",
  "settings": [
    { "type": "text", "id": "cta_text", "label": "Texto del botón CTA", "default": "DESCUBRE NUESTRAS CAJAS" },
    { "type": "url", "id": "cta_link", "label": "Enlace del botón CTA" },

    { "type": "image_picker", "id": "strip_image", "label": "Imagen de franja (slider)" },
    { "type": "range", "id": "strip_height", "label": "Altura de la franja", "min": 60, "max": 220, "step": 2, "default": 120, "unit": "px" },
    { "type": "range", "id": "strip_speed", "label": "Velocidad del slider", "min": 5, "max": 60, "step": 1, "default": 25, "unit": "s" },
    { "type": "range", "id": "strip_gap", "label": "Separación entre imágenes", "min": 0, "max": 300, "step": 5, "default": 140, "unit": "px" },

    { "type": "checkbox", "id": "show_payments", "label": "Mostrar métodos de pago automáticos", "default": false },
    { "type": "checkbox", "id": "use_custom_payment_icons", "label": "Usar iconos de pago (subidos en bloques)", "default": true },
    { "type": "range", "id": "payments_size", "label": "Tamaño de iconos de pago", "min": 14, "max": 26, "step": 1, "default": 18, "unit": "px" }
  ],
  "blocks": [
    {
      "type": "menu_column",
      "name": "Columna de menú",
      "limit": 3,
      "settings": [
        { "type": "link_list", "id": "menu", "label": "Selecciona un menú" }
      ]
    },
    {
      "type": "payment_icon",
      "name": "Icono de pago (imagen)",
      "limit": 10,
      "settings": [
        { "type": "image_picker", "id": "icon_image", "label": "Subir icono de pago (SVG/PNG)" },
        { "type": "text", "id": "icon_alt", "label": "Texto alternativo" }
      ]
    }
  ],
  "max_blocks": 13,
  "presets": [
    {
      "name": "Footer WOMBOX (Desktop)",
      "blocks": [
        { "type": "menu_column" },
        { "type": "menu_column" },
        { "type": "menu_column" }
      ]
    }
  ]
}
{% endschema %}
