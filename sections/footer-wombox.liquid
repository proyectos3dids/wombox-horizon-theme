{% comment %} {{ 'footer-wombox.css' | asset_url | stylesheet_tag }} {% endcomment %}

<style>
/* ====== FOOTER DESKTOP (no mobile) ====== */
.wombox-footer{background:#F24343;color:#fff;font-family:Inter,system-ui,Arial,sans-serif}

/* Grid principal: 3 menús + 1 CTA */
.wbf__inner{
  max-width:1200px;margin:0 auto;padding:56px 24px 28px;
  display:grid;grid-template-columns:1fr 1fr 1fr 1.25fr;gap:32px;align-items:start
}

/* Menús (bloques) */
.wbf__menus{grid-column:1 / span 3;display:grid;grid-template-columns:1fr 1fr 1fr;gap:32px}
.wbf__col{text-align:left}
.wbf__list{list-style:none;margin:0;padding:0}
.wbf__item{margin:18px 0}
.wbf__link{
  font-family:'Archivo',Inter,system-ui,Arial,sans-serif;font-weight:400;font-size:14px;line-height:1;
  letter-spacing:0;color:#fff;text-decoration:none;opacity:1
}
.wbf__link:hover{text-decoration:underline}

/* CTA + redes (desktop) */
.wbf__cta-col{grid-column:4 / span 1;display:flex;flex-direction:column;align-items:flex-end;gap:18px}
.wbf__cta{
  display:inline-block;padding:16px 28px;background:#fff;color:#E43F43;border-radius:999px;
  font-family:'Archivo',Inter,system-ui,Arial,sans-serif;font-weight:800;font-size:16px;text-transform:uppercase;
  letter-spacing:.5px;text-decoration:none;box-shadow:0 1px 0 rgba(0,0,0,.06);transition:opacity .2s
}
.wbf__cta:hover{opacity:.9}
.wbf__social{display:flex;gap:16px}
.wbf__social a{color:#fff;text-decoration:none;opacity:.95;font-weight:700}

/* ====== FRANJA INFERIOR (slider) ====== */
.wbf__bottom{position:relative;overflow:hidden;text-align:center;padding:12px 0 5px}

/* Pagos en desktop: en la franja, abajo-izq */
.wbf__payments{
  position:absolute;left:24px;bottom:10px;display:flex;gap:8px;z-index:2
}
.wbf__pay-pill{
  display:inline-flex;align-items:center;justify-content:center;
  height:calc(var(--pay-size,18px) + 4px);padding:2px 6px;border-radius:16px;background:#fff
}
.wbf__pay-pill svg{height:var(--pay-size,18px);width:auto;display:block}
.wbf__pay-pill img{height:var(--pay-size,18px);width:auto;display:block}

/* Slider */
.wbf__marquee{width:100%;overflow:hidden}
.wbf__track{display:flex;align-items:center;gap:var(--marquee-gap,140px);animation:wbf-track var(--marquee-speed,25s) linear infinite;width:max-content}
.wbf__item-img{height:var(--marquee-h,120px);width:auto;display:block}
@keyframes wbf-track{from{transform:translateX(0)}to{transform:translateX(-50%)}}

/* Copy genérico */
.wbf__copy{
  padding:10px 0;font-family:'Archivo',Inter,system-ui,Arial,sans-serif;font-weight:400;font-size:12px;line-height:1.29;
  color:#fff;text-align:center;display:block;max-width:922px;margin:8px auto 0;opacity:1
}
.wbf__copy--desktop{display:block}
.wbf__copy--mobile{display:none}

/* ====== BLOQUE SÓLO MÓVIL (acordeones) ====== */
.wbf__inner--mobile{display:none}
.wbfm__acc{border-bottom:1px solid rgba(255,255,255,.6);padding:14px 0}
.wbfm__sum{list-style:none;display:flex;align-items:center;justify-content:space-between;cursor:pointer}
.wbfm__title{font-family:'Archivo',Inter,system-ui,Arial,sans-serif;font-weight:800;font-size:20px;letter-spacing:.5px;text-transform:uppercase;color:#fff}
.wbfm__icon{font-size:24px;line-height:1;transition:transform .2s ease}
.wbfm__acc[open] .wbfm__icon{transform:rotate(45deg)} /* de + a x */
.wbfm__list{list-style:none;margin:12px 0 10px;padding:0}
.wbfm__item{margin:10px 0}
.wbfm__link{color:#fff;text-decoration:none;font-size:14px;line-height:1}
.wbfm__link:hover{text-decoration:underline}
.wbfm__social{display:flex;gap:16px;padding:14px 0 8px}
.wbfm__social a{color:#fff;text-decoration:none;font-weight:700}

/* Pagos fuera de la franja: sólo móvil */
.wbf__payments-mobile{display:none}
.wbf__payments-mobile .wbf__pay-pill{background:#fff;border-radius:16px}

/* ====== MOBILE ====== */
@media (max-width: 768px){
  /* Oculta grid desktop, muestra bloque móvil */
  .wbf__inner{display:none}
  .wbf__inner--mobile{display:block;max-width:1200px;margin:0 auto;padding:28px 16px 0}

  /* Ajustes franja y slider */
  .wbf__bottom{padding:16px 16px 12px; --pay-size:16px;}

  /* Oculta pagos dentro de franja; usa los móviles */
  .wbf__payments{display:none !important}
  .wbf__payments-mobile{display:flex;justify-content:center;align-items:center;gap:8px;margin:10px auto 6px;width:100%}

  /* Copy: sólo móvil */
  .wbf__copy--desktop{display:none}
  .wbf__copy--mobile{display:block}
}
</style>

<!-- sections/footer-wombox.liquid -->
<footer class="wombox-footer">
  <!-- DESKTOP -->
  <div class="wbf__inner">
    <div class="wbf__menus">
      {% for block in section.blocks %}
        {% if block.type == 'menu_column' %}
          <nav class="wbf__col" {{ block.shopify_attributes }}>
            {% if block.settings.menu != blank %}
              <ul class="wbf__list">
                {% for link in block.settings.menu.links %}
                  <li class="wbf__item"><a class="wbf__link" href="{{ link.url }}">{{ link.title }}</a></li>
                {% endfor %}
              </ul>
            {% endif %}
          </nav>
        {% endif %}
      {% endfor %}
    </div>

    <div class="wbf__cta-col">
      <a href="{{ section.settings.cta_link }}" class="wbf__cta">{{ section.settings.cta_text }}</a>
      <div class="wbf__social" aria-label="Redes sociales">
        <a href="#">f</a><a href="#">i</a><a href="#">x</a><a href="#">in</a><a href="#">▶</a><a href="#">t</a>
      </div>
    </div>
  </div>

  <!-- MÓVIL: acordeones + redes -->
  <div class="wbf__inner--mobile" aria-label="Footer móvil">
    {% for block in section.blocks %}
      {% if block.type == 'menu_column' and block.settings.menu != blank %}
        <details class="wbfm__acc" {{ block.shopify_attributes }}>
          <summary class="wbfm__sum">
            <span class="wbfm__title">{{ block.settings.menu.title | upcase }}</span>
            <span class="wbfm__icon" aria-hidden="true">+</span>
          </summary>
          <ul class="wbfm__list">
            {% for link in block.settings.menu.links %}
              <li class="wbfm__item"><a class="wbfm__link" href="{{ link.url }}">{{ link.title }}</a></li>
            {% endfor %}
          </ul>
        </details>
      {% endif %}
    {% endfor %}
    <div class="wbfm__social" aria-label="Redes sociales">
      <a href="#">f</a><a href="#">i</a><a href="#">x</a><a href="#">in</a><a href="#">▶</a><a href="#">t</a>
    </div>
  </div>

  {% if section.settings.strip_image != blank %}
    {% assign strip_src = section.settings.strip_image | image_url %}
    <div class="wbf__bottom" style="--pay-size: {{ section.settings.payments_size }}px;">

      <!-- Pagos DESKTOP (en franja) -->
      <div class="wbf__payments" aria-label="Métodos de pago">
        {% if section.settings.use_custom_payment_icons %}
          {% for block in section.blocks %}
            {% if block.type == 'payment_icon' and block.settings.icon_image != blank %}
              <span class="wbf__pay-pill" {{ block.shopify_attributes }}>
                <img src="{{ block.settings.icon_image | image_url }}" alt="{{ block.settings.icon_alt | escape }}" loading="lazy">
              </span>
            {% endif %}
          {% endfor %}
        {% elsif section.settings.show_payments %}
          {% for type in shop.enabled_payment_types %}
            <span class="wbf__pay-pill">{{ type | payment_type_svg_tag }}</span>
          {% endfor %}
        {% endif %}
      </div>

      <!-- Slider WOMBOX -->
      <div class="wbf__marquee"
           style="--marquee-h: {{ section.settings.strip_height }}px; --marquee-speed: {{ section.settings.strip_speed }}s; --marquee-gap: {{ section.settings.strip_gap }}px;">
        <div class="wbf__track">
          {% for i in (1..8) %}<img src="{{ strip_src }}" alt="WOMBOX" class="wbf__item-img">{% endfor %}
          {% for i in (1..8) %}<img src="{{ strip_src }}" alt="WOMBOX" class="wbf__item-img">{% endfor %}
        </div>
      </div>

      <!-- Copy desktop -->
      <p class="wbf__copy wbf__copy--desktop">© {{ 'now' | date: "%Y" }} WOMBOX</p>
    </div>
  {% endif %}

  <!-- Pagos MÓVIL (fuera de franja) -->
  <div class="wbf__payments-mobile" style="--pay-size: {{ section.settings.payments_size }}px;" aria-label="Métodos de pago">
    {% if section.settings.use_custom_payment_icons %}
      {% for block in section.blocks %}
        {% if block.type == 'payment_icon' and block.settings.icon_image != blank %}
          <span class="wbf__pay-pill" {{ block.shopify_attributes }}>
            <img src="{{ block.settings.icon_image | image_url }}" alt="{{ block.settings.icon_alt | escape }}" loading="lazy">
          </span>
        {% endif %}
      {% endfor %}
    {% elsif section.settings.show_payments %}
      {% for type in shop.enabled_payment_types %}
        <span class="wbf__pay-pill">{{ type | payment_type_svg_tag }}</span>
      {% endfor %}
    {% endif %}
  </div>

  <!-- Copy móvil -->
  <p class="wbf__copy wbf__copy--mobile">© {{ 'now' | date: "%Y" }} WOMBOX</p>
</footer>

{% schema %}
{
  "name": "Footer WOMBOX (Desktop)",
  "tag": "section",
  "class": "section-footer-wombox",
  "settings": [
    { "type": "text", "id": "cta_text", "label": "Texto del botón CTA", "default": "DESCUBRE NUESTRAS CAJAS" },
    { "type": "url", "id": "cta_link", "label": "Enlace del botón CTA" },

    { "type": "image_picker", "id": "strip_image", "label": "Imagen de franja (slider)" },
    { "type": "range", "id": "strip_height", "label": "Altura de la franja", "min": 60, "max": 220, "step": 2, "default": 120, "unit": "px" },
    { "type": "range", "id": "strip_speed", "label": "Velocidad del slider", "min": 5, "max": 60, "step": 1, "default": 25, "unit": "s" },
    { "type": "range", "id": "strip_gap", "label": "Separación entre imágenes", "min": 0, "max": 300, "step": 5, "default": 140, "unit": "px" },

    { "type": "checkbox", "id": "show_payments", "label": "Mostrar métodos de pago automáticos", "default": false },
    { "type": "checkbox", "id": "use_custom_payment_icons", "label": "Usar iconos de pago (subidos en bloques)", "default": true },
    { "type": "range", "id": "payments_size", "label": "Tamaño de iconos de pago", "min": 14, "max": 26, "step": 1, "default": 18, "unit": "px" }
  ],
  "blocks": [
    {
      "type": "menu_column",
      "name": "Columna de menú",
      "limit": 3,
      "settings": [
        { "type": "link_list", "id": "menu", "label": "Selecciona un menú" }
      ]
    },
    {
      "type": "payment_icon",
      "name": "Icono de pago (imagen)",
      "limit": 10,
      "settings": [
        { "type": "image_picker", "id": "icon_image", "label": "Subir icono de pago (SVG/PNG)" },
        { "type": "text", "id": "icon_alt", "label": "Texto alternativo" }
      ]
    }
  ],
  "max_blocks": 13,
  "presets": [
    {
      "name": "Footer WOMBOX (Desktop)",
      "blocks": [
        { "type": "menu_column" },
        { "type": "menu_column" },
        { "type": "menu_column" }
      ]
    }
  ]
}
{% endschema %}
